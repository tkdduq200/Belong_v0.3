{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

    <h2>ğŸ“Š 1ì¸ ê³ ë ¹ê°€êµ¬ ê³ ë…ì‚¬ ì¥ê¸° ì˜ˆì¸¡ (5ë…„ ë‹¨ìœ„ Bar Chart)</h2>
    <hr>

    <!-- êµ¬ ì„ íƒ -->
    <form method="POST">
        <label for="gu">ìì¹˜êµ¬ ì„ íƒ:</label>
        <select name="gu" class="form-control" style="max-width: 300px;">
            {% for gu in gu_list %}
                <option value="{{ gu }}" {% if gu == selected_gu %}selected{% endif %}>{{ gu }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary mt-2">ì¡°íšŒ</button>
    </form>

    {% if records %}
    <h4 class="mt-4">{{ selected_gu }} (2026~2075, 5ë…„ ë‹¨ìœ„ í‰ê· )</h4>

    <!-- ìº”ë²„ìŠ¤ -->
    <canvas id="futureBarChart" width="600" height="300"></canvas>

    <!-- Jinja ë°ì´í„°ë¥¼ JSON í˜•íƒœë¡œ ì•ˆì „í•˜ê²Œ ì „ë‹¬ -->
    <script type="application/json" id="future-binned-data">
        {
            "ranges": [
                {% for rng in year_ranges %}
                    "{{ rng }}"{% if not loop.last %}, {% endif %}
                {% endfor %}
            ],
            "values": [
                {% for val in binned_values %}
                    {{ val }}{% if not loop.last %}, {% endif %}
                {% endfor %}
            ]
        }
